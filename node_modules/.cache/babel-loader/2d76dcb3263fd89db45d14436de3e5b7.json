{"ast":null,"code":"var _jsxFileName = \"D:\\\\programming\\\\neogcamp\\\\LevelOne\\\\ecommerce-app\\\\src\\\\Products\\\\Products.js\",\n    _s = $RefreshSig$();\n\nimport { useCart } from \"../context/cart-context\";\nimport { useReducer } from \"react\";\nimport { useWishlist } from \"../context/wishlist-context\";\nimport { Link } from \"react-router-dom\";\nimport { showNotification } from \"../Utilities/toast\";\nimport { useProduct } from \"../context/product-context\";\nimport { updateCart } from \"../Utilities/cart-utilities\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Product = () => {\n  _s();\n\n  const {\n    productList\n  } = useProduct();\n  const {\n    setCartCount,\n    setCartPrice,\n    itemsInCart,\n    setItemsInCart\n  } = useCart();\n  const initialData = {\n    inStockOnly: true,\n    fastDeliveryOnly: false,\n    sortByPrice: null,\n    sortByRating: 0\n  };\n\n  const reducerFunction = (state, action) => {\n    switch (action.type) {\n      case \"TOGGLE_STOCK\":\n        return state = { ...state,\n          inStockOnly: !state.inStockOnly\n        };\n\n      case \"TOGGLE_DELIVERY\":\n        return state = { ...state,\n          fastDeliveryOnly: !state.fastDeliveryOnly\n        };\n\n      case \"SORT_BY_PRICE\":\n        return state = { ...state,\n          sortByPrice: action.payload\n        };\n\n      case \"SORT_BY_RATING\":\n        return state = { ...state,\n          sortByRating: action.payload\n        };\n\n      case \"INITIAL_DATA\":\n        return initialData;\n\n      default:\n        return state;\n    }\n  };\n\n  const [{\n    inStockOnly,\n    fastDeliveryOnly,\n    sortByPrice,\n    sortByRating\n  }, dispatch] = useReducer(reducerFunction, initialData);\n\n  const getPriceSortedData = (existingProductList, sortByPrice) => {\n    if (sortByPrice && sortByPrice === \"PRICE_HIGH_TO_LOW\") {\n      return existingProductList.sort((a, b) => b[\"price\"] - a[\"price\"]);\n    }\n\n    if (sortByPrice && sortByPrice === \"PRICE_LOW_TO_HIGH\") {\n      return existingProductList.sort((a, b) => a[\"price\"] - b[\"price\"]);\n    }\n\n    return existingProductList;\n  };\n\n  const getRatingSortedData = (existingProductList, sortByRating) => {\n    if (sortByRating === 0) {\n      return existingProductList;\n    }\n\n    let ratingNumber = sortByRating;\n    const sortedProductList = existingProductList.filter(item => item.rating === ratingNumber);\n    return sortedProductList;\n  };\n\n  const getFilteredData = (existingProductList, fastDeliveryOnly, inStockOnly) => {\n    const sortedProductList = existingProductList.filter(item => fastDeliveryOnly ? item.fastDelivery : true).filter(item => inStockOnly ? true : item.inStock);\n    return sortedProductList;\n  };\n\n  const priceSortedData = getPriceSortedData(productList, sortByPrice);\n  const ratingSortedData = getRatingSortedData(priceSortedData, sortByRating);\n  const filteredData = getFilteredData(ratingSortedData, fastDeliveryOnly, inStockOnly);\n\n  const addToCartHandler = (existingProductList, itemsInCart, productId) => {\n    showNotification(\"Added to Cart\");\n    const updatedCartList = updateCart(existingProductList, itemsInCart, productId, \"ADD\");\n    const currentProduct = existingProductList.find(item => item._id === productId);\n    const currentProductPrice = parseFloat(currentProduct.price);\n    setCartCount(count => count + 1);\n    setCartPrice(price => price + currentProductPrice);\n    setItemsInCart(updatedCartList);\n  };\n\n  const addToWishlistHandler = (existingProductList, productId) => {\n    showNotification(\"Added to Wishlist\");\n    const currentItem = productList.find(item => item._id === productId);\n    setItemsInWishlist(items => [...items, currentItem]);\n  };\n\n  const addRatingStars = rating => {\n    let starString = \"\";\n\n    for (let i = 0; i < rating; i++) {\n      starString += \"⭐\";\n    }\n\n    return starString;\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        marginLeft: \"1rem\"\n      },\n      children: [\"Total no. of products : \", filteredData.length]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-page-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-sort\",\n        children: [/*#__PURE__*/_jsxDEV(\"fieldset\", {\n          children: [/*#__PURE__*/_jsxDEV(\"legend\", {\n            children: \"Sort By :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: inStockOnly,\n              onChange: () => dispatch({\n                type: \"TOGGLE_STOCK\"\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 15\n            }, this), \"Show Out of Stock\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: fastDeliveryOnly,\n              onChange: () => dispatch({\n                type: \"TOGGLE_DELIVERY\"\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 15\n            }, this), \"Show Fast Delivery Only\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n          children: [/*#__PURE__*/_jsxDEV(\"legend\", {\n            children: \"Price :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              onChange: () => dispatch({\n                type: \"SORT_BY_PRICE\",\n                payload: \"PRICE_LOW_TO_HIGH\"\n              }),\n              checked: sortByPrice && sortByPrice === \"PRICE_LOW_TO_HIGH\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 15\n            }, this), \"Low to High\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              onChange: () => dispatch({\n                type: \"SORT_BY_PRICE\",\n                payload: \"PRICE_HIGH_TO_LOW\"\n              }),\n              checked: sortByPrice && sortByPrice === \"PRICE_HIGH_TO_LOW\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 15\n            }, this), \"High To Low\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n          children: [/*#__PURE__*/_jsxDEV(\"legend\", {\n            children: \"Rating :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              onChange: () => dispatch({\n                type: \"SORT_BY_RATING\",\n                payload: 1\n              }),\n              checked: sortByRating && sortByRating === 1\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 15\n            }, this), \"\\u2B50\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              onChange: () => dispatch({\n                type: \"SORT_BY_RATING\",\n                payload: 2\n              }),\n              checked: sortByRating && sortByRating === 2\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 15\n            }, this), \"\\u2B50\\u2B50\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              onChange: () => dispatch({\n                type: \"SORT_BY_RATING\",\n                payload: 3\n              }),\n              checked: sortByRating && sortByRating === 3\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 15\n            }, this), \"\\u2B50\\u2B50\\u2B50\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              onChange: () => dispatch({\n                type: \"SORT_BY_RATING\",\n                payload: 4\n              }),\n              checked: sortByRating && sortByRating === 4\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 15\n            }, this), \"\\u2B50\\u2B50\\u2B50\\u2B50\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              onChange: () => dispatch({\n                type: \"SORT_BY_RATING\",\n                payload: 5\n              }),\n              checked: sortByRating && sortByRating === 5\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 15\n            }, this), \"\\u2B50\\u2B50\\u2B50\\u2B50\\u2B50\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 13\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"filter-reset-button\",\n          className: \"button-primary\",\n          onClick: () => dispatch({\n            type: \"INITIAL_DATA\"\n          }),\n          children: \"Reset Filters\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-container\",\n        children: [filteredData.map(({\n          _id,\n          name,\n          image,\n          price,\n          rating,\n          inStock,\n          fastDelivery\n        }) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: image,\n            alt: name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              id: \"product-details-name\",\n              children: name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              id: \"product-details-price\",\n              children: [\"Rs. \", price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              id: \"product-details-rating\",\n              children: addRatingStars(rating)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 19\n            }, this), inStock && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"card-badge\",\n              children: \"In Stock\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 31\n            }, this), fastDelivery && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"card-badge delivery-badge\",\n              children: \"fast delivery\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"product-details-button-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"button-add button-primary\",\n                onClick: () => addToCartHandler(filteredData, itemsInCart, _id),\n                children: \"Add to Cart\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                id: \"button-wishlist\",\n                className: \"button-add button-secondary\",\n                onClick: () => addToWishlistHandler(filteredData, _id),\n                children: \"Add to Wishlist\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: `/products/${_id}`,\n              children: \"View Details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 17\n          }, this)]\n        }, _id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 15\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"notification-container\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Product, \"N4Cc053PPm/Y/tP5bCjRiqVMmZs=\", false, function () {\n  return [useProduct, useCart];\n});\n\n_c = Product;\n\nvar _c;\n\n$RefreshReg$(_c, \"Product\");","map":{"version":3,"sources":["D:/programming/neogcamp/LevelOne/ecommerce-app/src/Products/Products.js"],"names":["useCart","useReducer","useWishlist","Link","showNotification","useProduct","updateCart","Product","productList","setCartCount","setCartPrice","itemsInCart","setItemsInCart","initialData","inStockOnly","fastDeliveryOnly","sortByPrice","sortByRating","reducerFunction","state","action","type","payload","dispatch","getPriceSortedData","existingProductList","sort","a","b","getRatingSortedData","ratingNumber","sortedProductList","filter","item","rating","getFilteredData","fastDelivery","inStock","priceSortedData","ratingSortedData","filteredData","addToCartHandler","productId","updatedCartList","currentProduct","find","_id","currentProductPrice","parseFloat","price","count","addToWishlistHandler","currentItem","setItemsInWishlist","items","addRatingStars","starString","i","marginLeft","length","map","name","image"],"mappings":"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","sourcesContent":["import { useCart } from \"../context/cart-context\";\r\nimport { useReducer } from \"react\";\r\nimport { useWishlist } from \"../context/wishlist-context\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { showNotification } from \"../Utilities/toast\";\r\nimport { useProduct } from \"../context/product-context\";\r\nimport { updateCart } from \"../Utilities/cart-utilities\";\r\n\r\nexport const Product = () => {\r\n  const { productList } = useProduct();\r\n  const { setCartCount, setCartPrice, itemsInCart, setItemsInCart } = useCart();\r\n\r\n  const initialData = {\r\n    inStockOnly: true,\r\n    fastDeliveryOnly: false,\r\n    sortByPrice: null,\r\n    sortByRating: 0,\r\n  };\r\n\r\n  const reducerFunction = (state, action) => {\r\n    switch (action.type) {\r\n      case \"TOGGLE_STOCK\":\r\n        return (state = {\r\n          ...state,\r\n          inStockOnly: !state.inStockOnly,\r\n        });\r\n      case \"TOGGLE_DELIVERY\":\r\n        return (state = {\r\n          ...state,\r\n          fastDeliveryOnly: !state.fastDeliveryOnly,\r\n        });\r\n      case \"SORT_BY_PRICE\":\r\n        return (state = {\r\n          ...state,\r\n          sortByPrice: action.payload,\r\n        });\r\n      case \"SORT_BY_RATING\":\r\n        return (state = {\r\n          ...state,\r\n          sortByRating: action.payload,\r\n        });\r\n      case \"INITIAL_DATA\":\r\n        return initialData;\r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n\r\n  const [\r\n    { inStockOnly, fastDeliveryOnly, sortByPrice, sortByRating },\r\n    dispatch,\r\n  ] = useReducer(reducerFunction, initialData);\r\n\r\n  const getPriceSortedData = (existingProductList, sortByPrice) => {\r\n    if (sortByPrice && sortByPrice === \"PRICE_HIGH_TO_LOW\") {\r\n      return existingProductList.sort((a, b) => b[\"price\"] - a[\"price\"]);\r\n    }\r\n    if (sortByPrice && sortByPrice === \"PRICE_LOW_TO_HIGH\") {\r\n      return existingProductList.sort((a, b) => a[\"price\"] - b[\"price\"]);\r\n    }\r\n    return existingProductList;\r\n  };\r\n\r\n  const getRatingSortedData = (existingProductList, sortByRating) => {\r\n    if (sortByRating === 0) {\r\n      return existingProductList;\r\n    }\r\n    let ratingNumber = sortByRating;\r\n    const sortedProductList = existingProductList.filter(\r\n      (item) => item.rating === ratingNumber\r\n    );\r\n    return sortedProductList;\r\n  };\r\n\r\n  const getFilteredData = (\r\n    existingProductList,\r\n    fastDeliveryOnly,\r\n    inStockOnly\r\n  ) => {\r\n    const sortedProductList = existingProductList\r\n      .filter((item) => (fastDeliveryOnly ? item.fastDelivery : true))\r\n      .filter((item) => (inStockOnly ? true : item.inStock));\r\n    return sortedProductList;\r\n  };\r\n\r\n  const priceSortedData = getPriceSortedData(productList, sortByPrice);\r\n  const ratingSortedData = getRatingSortedData(priceSortedData, sortByRating);\r\n  const filteredData = getFilteredData(\r\n    ratingSortedData,\r\n    fastDeliveryOnly,\r\n    inStockOnly\r\n  );\r\n\r\n  const addToCartHandler = (existingProductList, itemsInCart, productId) => {\r\n    showNotification(\"Added to Cart\");\r\n\r\n    const updatedCartList = updateCart(\r\n      existingProductList,\r\n      itemsInCart,\r\n      productId,\r\n      \"ADD\"\r\n    );\r\n\r\n    const currentProduct = existingProductList.find(\r\n      (item) => item._id === productId\r\n    );\r\n    const currentProductPrice = parseFloat(currentProduct.price);\r\n    setCartCount((count) => count + 1);\r\n    setCartPrice((price) => price + currentProductPrice);\r\n    setItemsInCart(updatedCartList);\r\n  };\r\n\r\n  const addToWishlistHandler = (existingProductList, productId) => {\r\n    showNotification(\"Added to Wishlist\");\r\n    const currentItem = productList.find((item) => item._id === productId);\r\n    setItemsInWishlist((items) => [...items, currentItem]);\r\n  };\r\n\r\n  const addRatingStars = (rating) => {\r\n    let starString = \"\";\r\n    for (let i = 0; i < rating; i++) {\r\n      starString += \"⭐\";\r\n    }\r\n    return starString;\r\n  };\r\n  return (\r\n    <>\r\n      <p style={{ marginLeft: \"1rem\" }}>\r\n        Total no. of products : {filteredData.length}\r\n      </p>\r\n      <div className=\"product-page-container\">\r\n        <div className=\"container-sort\">\r\n          <fieldset>\r\n            <legend>Sort By :</legend>\r\n            <label>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={inStockOnly}\r\n                onChange={() => dispatch({ type: \"TOGGLE_STOCK\" })}\r\n              />\r\n              Show Out of Stock\r\n            </label>\r\n            <br />\r\n            <label>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={fastDeliveryOnly}\r\n                onChange={() => dispatch({ type: \"TOGGLE_DELIVERY\" })}\r\n              />\r\n              Show Fast Delivery Only\r\n            </label>\r\n          </fieldset>\r\n\r\n          <fieldset>\r\n            <legend>Price :</legend>\r\n            <label>\r\n              <input\r\n                type=\"radio\"\r\n                onChange={() =>\r\n                  dispatch({\r\n                    type: \"SORT_BY_PRICE\",\r\n                    payload: \"PRICE_LOW_TO_HIGH\",\r\n                  })\r\n                }\r\n                checked={sortByPrice && sortByPrice === \"PRICE_LOW_TO_HIGH\"}\r\n              />\r\n              Low to High\r\n            </label>\r\n            <br />\r\n            <label>\r\n              <input\r\n                type=\"radio\"\r\n                onChange={() =>\r\n                  dispatch({\r\n                    type: \"SORT_BY_PRICE\",\r\n                    payload: \"PRICE_HIGH_TO_LOW\",\r\n                  })\r\n                }\r\n                checked={sortByPrice && sortByPrice === \"PRICE_HIGH_TO_LOW\"}\r\n              />\r\n              High To Low\r\n            </label>\r\n          </fieldset>\r\n\r\n          <fieldset>\r\n            <legend>Rating :</legend>\r\n            <label>\r\n              <input\r\n                type=\"radio\"\r\n                onChange={() =>\r\n                  dispatch({ type: \"SORT_BY_RATING\", payload: 1 })\r\n                }\r\n                checked={sortByRating && sortByRating === 1}\r\n              />\r\n              ⭐\r\n            </label>{\" \"}\r\n            <br />\r\n            <label>\r\n              <input\r\n                type=\"radio\"\r\n                onChange={() =>\r\n                  dispatch({ type: \"SORT_BY_RATING\", payload: 2 })\r\n                }\r\n                checked={sortByRating && sortByRating === 2}\r\n              />\r\n              ⭐⭐\r\n            </label>{\" \"}\r\n            <br />\r\n            <label>\r\n              <input\r\n                type=\"radio\"\r\n                onChange={() =>\r\n                  dispatch({ type: \"SORT_BY_RATING\", payload: 3 })\r\n                }\r\n                checked={sortByRating && sortByRating === 3}\r\n              />\r\n              ⭐⭐⭐\r\n            </label>{\" \"}\r\n            <br />\r\n            <label>\r\n              <input\r\n                type=\"radio\"\r\n                onChange={() =>\r\n                  dispatch({ type: \"SORT_BY_RATING\", payload: 4 })\r\n                }\r\n                checked={sortByRating && sortByRating === 4}\r\n              />\r\n              ⭐⭐⭐⭐\r\n            </label>{\" \"}\r\n            <br />\r\n            <label>\r\n              <input\r\n                type=\"radio\"\r\n                onChange={() =>\r\n                  dispatch({ type: \"SORT_BY_RATING\", payload: 5 })\r\n                }\r\n                checked={sortByRating && sortByRating === 5}\r\n              />\r\n              ⭐⭐⭐⭐⭐\r\n            </label>{\" \"}\r\n            <br />\r\n          </fieldset>\r\n\r\n          <button\r\n            id=\"filter-reset-button\"\r\n            className=\"button-primary\"\r\n            onClick={() => dispatch({ type: \"INITIAL_DATA\" })}\r\n          >\r\n            Reset Filters\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"product-container\">\r\n          {filteredData.map(\r\n            ({ _id, name, image, price, rating, inStock, fastDelivery }) => (\r\n              <div key={_id} className=\"product-item\">\r\n                <img src={image} alt={name} />\r\n                <div className=\"product-details\">\r\n                  <p id=\"product-details-name\">{name}</p>\r\n                  <p id=\"product-details-price\">Rs. {price}</p>\r\n                  <p id=\"product-details-rating\">{addRatingStars(rating)}</p>\r\n                  {inStock && <span className=\"card-badge\">In Stock</span>}\r\n                  {fastDelivery && (\r\n                    <span className=\"card-badge delivery-badge\">\r\n                      fast delivery\r\n                    </span>\r\n                  )}\r\n                  <div id=\"product-details-button-container\">\r\n                    <button\r\n                      className=\"button-add button-primary\"\r\n                      onClick={() =>\r\n                        addToCartHandler(filteredData, itemsInCart, _id)\r\n                      }\r\n                    >\r\n                      Add to Cart\r\n                    </button>\r\n                    <button\r\n                      id=\"button-wishlist\"\r\n                      className=\"button-add button-secondary\"\r\n                      onClick={() => addToWishlistHandler(filteredData, _id)}\r\n                    >\r\n                      Add to Wishlist\r\n                    </button>\r\n                  </div>\r\n                  <br />\r\n                  <Link to={`/products/${_id}`}>View Details</Link>\r\n                </div>\r\n              </div>\r\n            )\r\n          )}\r\n          <div id=\"notification-container\"></div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}